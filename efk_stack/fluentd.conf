<source>
  @type syslog
  port 5140
  bind 0.0.0.0
  tag system
</source>

<match system.*.*>
  type record_reformer
  tag elasticsearch
  facility ${tag_parts[1]}
  severity ${tag_parts[2]}
</match>

<match elasticsearch>
  type copy
  <store>
    type stdout
  </store>
  <store>
    type elasticsearch
    logstash_format true
    flush_interval 5s #debug
    hosts http://elasticsearch:9200
  </store>
</match>

# events stored on Elastic Search
#<match system.**>
#  @type elasticsearch
#  logstash_format true
#  flush_interval 10s # for testing
#  include_tag_key true
#  tag_key _key
#  hosts http://elasticsearch:9200
#</match>

# events just printed on the screen for debugging purpose
#<match test.**>
#  type stdout
#</match>
